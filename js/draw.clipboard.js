define(["knockout","underscore","transform","draw","util/requestanimationframe","draw.momento"],function(e,n,o,t,i){var a=e.observableArray([]),l=function(){var e=t.selection().slice(0);t.selection.removeAll(),n(e).invoke("visible",!1),t.save.apply(null,e)},r=function(){t.selection().length>0&&a(n(t.selection()).invoke("get"))},c=function(){r(),l()},s=function(){if(a()){var e=n(a()).map(function(e){var n=t.layer().newShape(e.type);return n.set(e),n});o(e,{translate:{x:30/t.zoom(),y:30/t.zoom()}}),i(function(){t.selection(e),t.save.apply(null,e)})}};n(t).extend({clipboard:a,hide:l,cut:c,copy:r,paste:s})});