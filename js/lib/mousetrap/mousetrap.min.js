!function(){function e(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function t(e){return"keypress"==e.type?String.fromCharCode(e.which):l[e.which]?l[e.which]:p[e.which]?p[e.which]:String.fromCharCode(e.which).toLowerCase()}function n(e){var t,e=e||{},n=!1;for(t in g)e[t]?n=!0:g[t]=0;n||(b=!1)}function r(e,t,n,r,o){var i,s,c=[],u=n.type;if(!d[e])return[];for("keyup"==u&&a(e)&&(t=[e]),i=0;i<d[e].length;++i)s=d[e][i],s.seq&&g[s.seq]!=s.level||u!=s.action||("keypress"!=u||n.metaKey||n.ctrlKey)&&t.sort().join(",")!==s.modifiers.sort().join(",")||(r&&s.combo==o&&d[e].splice(i,1),c.push(s));return c}function o(e,t,n){w.stopCallback(t,t.target||t.srcElement,n)||!1!==e(t,n)||(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.returnValue=!1,t.cancelBubble=!0)}function i(e){"number"!=typeof e.which&&(e.which=e.keyCode);var i=t(e);if(i)if("keyup"==e.type&&k==i)k=!1;else{var s=[];e.shiftKey&&s.push("shift"),e.altKey&&s.push("alt"),e.ctrlKey&&s.push("ctrl"),e.metaKey&&s.push("meta");var c,s=r(i,s,e),u={},f=!1;for(c=0;c<s.length;++c)s[c].seq?(f=!0,u[s[c].seq]=1,o(s[c].callback,e,s[c].combo)):!f&&!b&&o(s[c].callback,e,s[c].combo);e.type==b&&!a(i)&&n(u)}}function a(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function s(e,t,n){if(!n){if(!u){u={};for(var r in l)95<r&&112>r||l.hasOwnProperty(r)&&(u[l[r]]=r)}n=u[e]?"keydown":"keypress"}return"keypress"==n&&t.length&&(n="keydown"),n}function c(e,i,u,l,p){var y,v,e=e.replace(/\s+/g," "),w=e.split(" "),E=[];if(1<w.length){var C=e,T=u;for(g[C]=0,T||(T=s(w[0],[])),e=function(){b=T,++g[C],clearTimeout(f),f=setTimeout(n,1e3)},u=function(e){o(i,e,C),"keyup"!==T&&(k=t(e)),setTimeout(n,10)},l=0;l<w.length;++l)c(w[l],l<w.length-1?e:u,T,C,l)}else{for(v="+"===e?["+"]:e.split("+"),w=0;w<v.length;++w)y=v[w],m[y]&&(y=m[y]),u&&"keypress"!=u&&h[y]&&(y=h[y],E.push("shift")),a(y)&&E.push(y);u=s(y,E,u),d[y]||(d[y]=[]),r(y,E,{type:u},!l,e),d[y][l?"unshift":"push"]({callback:i,modifiers:E,action:u,seq:l,level:p,combo:e})}}for(var u,f,l={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},p={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},h={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},m={option:"alt",command:"meta",return:"enter",escape:"esc"},d={},y={},g={},k=!1,b=!1,v=1;20>v;++v)l[111+v]="f"+v;for(v=0;9>=v;++v)l[v+96]=v;e(document,"keypress",i),e(document,"keydown",i),e(document,"keyup",i);var w={bind:function(e,t,n){for(var r=e instanceof Array?e:[e],o=0;o<r.length;++o)c(r[o],t,n);return y[e+":"+n]=t,this},unbind:function(e,t){return y[e+":"+t]&&(delete y[e+":"+t],this.bind(e,function(){},t)),this},trigger:function(e,t){return y[e+":"+t](),this},reset:function(){return d={},y={},this},stopCallback:function(e,t){return!(-1<(" "+t.className+" ").indexOf(" mousetrap "))&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.contentEditable&&"true"==t.contentEditable)}};window.Mousetrap=w,"function"==typeof define&&define.amd&&define("mousetrap",[],function(){return w})}();